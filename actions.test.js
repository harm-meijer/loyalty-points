import action from "./actions";

test("if body is undefined then throw", () => {
  return action({})
    .then(() => expect("passed").toBe("failed"))
    .catch(() => expect("failed").toBe("failed"));
});
test("if body is null then throw", () => {
  return action({ body: null })
    .then(() => expect("passed").toBe("failed"))
    .catch(() => expect("failed").toBe("failed"));
});
test("Add points and set customer group", () => {
  const message = {
    data: "eyJub3RpZmljYXRpb25UeXBlIjoiTWVzc2FnZSIsInByb2plY3RLZXkiOiJzYnMtc2FuZGJveCIsImlkIjoiYzg2NzZkMGEtYTFjNi00OTNjLTk4NWItNjQwOTZkNWI2Yzg2IiwidmVyc2lvbiI6MSwic2VxdWVuY2VOdW1iZXIiOjEsInJlc291cmNlIjp7InR5cGVJZCI6Im9yZGVyIiwiaWQiOiI3YjMyYmFiNS1lZDcyLTQyNDktYTRmNy0zNDhlNDA0Y2ZmZWIifSwicmVzb3VyY2VWZXJzaW9uIjoxLCJyZXNvdXJjZVVzZXJQcm92aWRlZElkZW50aWZpZXJzIjp7fSwidHlwZSI6Ik9yZGVyQ3JlYXRlZCIsIm9yZGVyIjp7InR5cGUiOiJPcmRlciIsImlkIjoiN2IzMmJhYjUtZWQ3Mi00MjQ5LWE0ZjctMzQ4ZTQwNGNmZmViIiwidmVyc2lvbiI6MSwibGFzdE1lc3NhZ2VTZXF1ZW5jZU51bWJlciI6MSwiY3JlYXRlZEF0IjoiMjAyMi0wNS0wM1QwNDo0MTo0MS4xMzZaIiwibGFzdE1vZGlmaWVkQXQiOiIyMDIyLTA1LTAzVDA0OjQxOjQxLjEzNloiLCJsYXN0TW9kaWZpZWRCeSI6eyJjbGllbnRJZCI6InpIeFRpRW92SGF1SWhzT2h3X0QwSkpqTyIsImlzUGxhdGZvcm1DbGllbnQiOmZhbHNlLCJjdXN0b21lciI6eyJ0eXBlSWQiOiJjdXN0b21lciIsImlkIjoiOTUwNDBjN2YtOTllYi00YWJlLWJjNTktYjI1NjMzNjZkYzQxIn19LCJjcmVhdGVkQnkiOnsiY2xpZW50SWQiOiJ6SHhUaUVvdkhhdUloc09od19EMEpKak8iLCJpc1BsYXRmb3JtQ2xpZW50IjpmYWxzZSwiY3VzdG9tZXIiOnsidHlwZUlkIjoiY3VzdG9tZXIiLCJpZCI6Ijk1MDQwYzdmLTk5ZWItNGFiZS1iYzU5LWIyNTYzMzY2ZGM0MSJ9fSwiY3VzdG9tZXJJZCI6Ijk1MDQwYzdmLTk5ZWItNGFiZS1iYzU5LWIyNTYzMzY2ZGM0MSIsInRvdGFsUHJpY2UiOnsidHlwZSI6ImNlbnRQcmVjaXNpb24iLCJjdXJyZW5jeUNvZGUiOiJFVVIiLCJjZW50QW1vdW50Ijo0ODAwLCJmcmFjdGlvbkRpZ2l0cyI6Mn0sInRheGVkUHJpY2UiOnsidG90YWxOZXQiOnsidHlwZSI6ImNlbnRQcmVjaXNpb24iLCJjdXJyZW5jeUNvZGUiOiJFVVIiLCJjZW50QW1vdW50Ijo0MDM0LCJmcmFjdGlvbkRpZ2l0cyI6Mn0sInRvdGFsR3Jvc3MiOnsidHlwZSI6ImNlbnRQcmVjaXNpb24iLCJjdXJyZW5jeUNvZGUiOiJFVVIiLCJjZW50QW1vdW50Ijo0ODAwLCJmcmFjdGlvbkRpZ2l0cyI6Mn0sInRheFBvcnRpb25zIjpbeyJyYXRlIjowLjE5LCJhbW91bnQiOnsidHlwZSI6ImNlbnRQcmVjaXNpb24iLCJjdXJyZW5jeUNvZGUiOiJFVVIiLCJjZW50QW1vdW50Ijo3NjYsImZyYWN0aW9uRGlnaXRzIjoyfSwibmFtZSI6IjE5JSBpbmNsLiJ9XSwidG90YWxUYXgiOnsidHlwZSI6ImNlbnRQcmVjaXNpb24iLCJjdXJyZW5jeUNvZGUiOiJFVVIiLCJjZW50QW1vdW50Ijo3NjYsImZyYWN0aW9uRGlnaXRzIjoyfX0sImNvdW50cnkiOiJERSIsIm9yZGVyU3RhdGUiOiJPcGVuIiwic3luY0luZm8iOltdLCJyZXR1cm5JbmZvIjpbXSwic2hpcHBpbmdJbmZvIjp7InNoaXBwaW5nTWV0aG9kTmFtZSI6IlN0YW5kYXJkIEVVIiwicHJpY2UiOnsidHlwZSI6ImNlbnRQcmVjaXNpb24iLCJjdXJyZW5jeUNvZGUiOiJFVVIiLCJjZW50QW1vdW50IjozMDAsImZyYWN0aW9uRGlnaXRzIjoyfSwic2hpcHBpbmdSYXRlIjp7InByaWNlIjp7InR5cGUiOiJjZW50UHJlY2lzaW9uIiwiY3VycmVuY3lDb2RlIjoiRVVSIiwiY2VudEFtb3VudCI6MzAwLCJmcmFjdGlvbkRpZ2l0cyI6Mn0sImZyZWVBYm92ZSI6eyJ0eXBlIjoiY2VudFByZWNpc2lvbiIsImN1cnJlbmN5Q29kZSI6IkVVUiIsImNlbnRBbW91bnQiOjIwMDAwLCJmcmFjdGlvbkRpZ2l0cyI6Mn0sInRpZXJzIjpbXX0sInRheFJhdGUiOnsibmFtZSI6IjE5JSBpbmNsLiIsImFtb3VudCI6MC4xOSwiaW5jbHVkZWRJblByaWNlIjp0cnVlLCJjb3VudHJ5IjoiREUiLCJpZCI6ImY3Z0ZmcVE4Iiwic3ViUmF0ZXMiOltdfSwidGF4Q2F0ZWdvcnkiOnsidHlwZUlkIjoidGF4LWNhdGVnb3J5IiwiaWQiOiJkYTJhYTE1ZC00MzFmLTQ1ZGEtYmRjOC1kMTBiOWMyZmI4NDcifSwiZGVsaXZlcmllcyI6W10sInNoaXBwaW5nTWV0aG9kIjp7InR5cGVJZCI6InNoaXBwaW5nLW1ldGhvZCIsImlkIjoiNjgyNGVjYzMtNWQ3My00MDdlLTllYzAtMDcwNDQ0NTJmNGIwIn0sInRheGVkUHJpY2UiOnsidG90YWxOZXQiOnsidHlwZSI6ImNlbnRQcmVjaXNpb24iLCJjdXJyZW5jeUNvZGUiOiJFVVIiLCJjZW50QW1vdW50IjoyNTIsImZyYWN0aW9uRGlnaXRzIjoyfSwidG90YWxHcm9zcyI6eyJ0eXBlIjoiY2VudFByZWNpc2lvbiIsImN1cnJlbmN5Q29kZSI6IkVVUiIsImNlbnRBbW91bnQiOjMwMCwiZnJhY3Rpb25EaWdpdHMiOjJ9LCJ0b3RhbFRheCI6eyJ0eXBlIjoiY2VudFByZWNpc2lvbiIsImN1cnJlbmN5Q29kZSI6IkVVUiIsImNlbnRBbW91bnQiOjQ4LCJmcmFjdGlvbkRpZ2l0cyI6Mn19LCJzaGlwcGluZ01ldGhvZFN0YXRlIjoiTWF0Y2hlc0NhcnQifSwidGF4TW9kZSI6IlBsYXRmb3JtIiwiaW52ZW50b3J5TW9kZSI6Ik5vbmUiLCJ0YXhSb3VuZGluZ01vZGUiOiJIYWxmRXZlbiIsInRheENhbGN1bGF0aW9uTW9kZSI6IkxpbmVJdGVtTGV2ZWwiLCJvcmlnaW4iOiJDdXN0b21lciIsImxpbmVJdGVtcyI6W3siaWQiOiI0MTU2N2Y0Zi0wNGExLTQ3NDYtYmUzMy1hZTVhODNkNDllNzUiLCJwcm9kdWN0SWQiOiI1MTJmNjk1Ni01NGQ1LTRmNDYtYWJkNS1lZTFmZDJjMGQ1YmMiLCJwcm9kdWN0S2V5IjoiZGVsaXZlcnktcGFzcyIsIm5hbWUiOnsiZW4iOiJEZWxpdmVyeSBQYXNzIn0sInByb2R1Y3RUeXBlIjp7InR5cGVJZCI6InByb2R1Y3QtdHlwZSIsImlkIjoiOTU5OGFhOTQtMjk5NC00ZjQzLTg0NzEtNjlmNjVmNDZjN2UzIiwidmVyc2lvbiI6NH0sInZhcmlhbnQiOnsiaWQiOjEsInNrdSI6ImRlbGl2ZXJ5LXBhc3MtMSIsImtleSI6ImRlbGl2ZXJ5LXBhc3MtMSIsInByaWNlcyI6W3siaWQiOiJkYzJiZTY3YS0xNmZkLTQ4ZmQtYjIyMS1hZTdlMzIyMjIwY2QiLCJ2YWx1ZSI6eyJ0eXBlIjoiY2VudFByZWNpc2lvbiIsImN1cnJlbmN5Q29kZSI6IkdCUCIsImNlbnRBbW91bnQiOjQyMDAsImZyYWN0aW9uRGlnaXRzIjoyfX0seyJpZCI6ImJlMGYxZDBjLWIxYjctNGI5My1iMmJhLWU4MjI2ZmU5ZTY2ZiIsInZhbHVlIjp7InR5cGUiOiJjZW50UHJlY2lzaW9uIiwiY3VycmVuY3lDb2RlIjoiRVVSIiwiY2VudEFtb3VudCI6NDUwMCwiZnJhY3Rpb25EaWdpdHMiOjJ9fSx7ImlkIjoiYTBkMmI5YWUtZDgwZC00ZjNjLWFhYWEtZTNiYTMwYTdhZDUwIiwidmFsdWUiOnsidHlwZSI6ImNlbnRQcmVjaXNpb24iLCJjdXJyZW5jeUNvZGUiOiJFVVIiLCJjZW50QW1vdW50Ijo0NTAwLCJmcmFjdGlvbkRpZ2l0cyI6Mn0sImNvdW50cnkiOiJERSJ9XSwiaW1hZ2VzIjpbeyJ1cmwiOiJodHRwOi8vbXkuY3VzdG9tLmNkbi5uZXQvbWFzdGVyLnBuZyIsImxhYmVsIjoiTWFzdGVyIEltYWdlIiwiZGltZW5zaW9ucyI6eyJ3IjozMDMsImgiOjE5N319XSwiYXR0cmlidXRlcyI6W3sibmFtZSI6ImRpc2NvdW50LXZhbHVlIiwidmFsdWUiOjIwfSx7Im5hbWUiOiJkaXNjb3VudC1zdGFydC1kYXRlIiwidmFsdWUiOiIyMDIyLTA0LTEyIn0seyJuYW1lIjoiZGlzY291bnQtZW5kLWRhdGUiLCJ2YWx1ZSI6IjIwMjItMDktMDEifV0sImFzc2V0cyI6W119LCJwcmljZSI6eyJpZCI6ImEwZDJiOWFlLWQ4MGQtNGYzYy1hYWFhLWUzYmEzMGE3YWQ1MCIsInZhbHVlIjp7InR5cGUiOiJjZW50UHJlY2lzaW9uIiwiY3VycmVuY3lDb2RlIjoiRVVSIiwiY2VudEFtb3VudCI6NDUwMCwiZnJhY3Rpb25EaWdpdHMiOjJ9LCJjb3VudHJ5IjoiREUifSwicXVhbnRpdHkiOjEsImRpc2NvdW50ZWRQcmljZVBlclF1YW50aXR5IjpbXSwidGF4UmF0ZSI6eyJuYW1lIjoiMTklIGluY2wuIiwiYW1vdW50IjowLjE5LCJpbmNsdWRlZEluUHJpY2UiOnRydWUsImNvdW50cnkiOiJERSIsImlkIjoiZjdnRmZxUTgiLCJzdWJSYXRlcyI6W119LCJhZGRlZEF0IjoiMjAyMi0wNS0wM1QwNDo0MTozMy4yMDVaIiwibGFzdE1vZGlmaWVkQXQiOiIyMDIyLTA1LTAzVDA0OjQxOjMzLjIwNVoiLCJzdGF0ZSI6W3sicXVhbnRpdHkiOjEsInN0YXRlIjp7InR5cGVJZCI6InN0YXRlIiwiaWQiOiJlOTNkOTJjNC1jMmRjLTQyZjctYjFlMS0zZTBiNzM5Yjc2NTcifX1dLCJwcmljZU1vZGUiOiJQbGF0Zm9ybSIsInRvdGFsUHJpY2UiOnsidHlwZSI6ImNlbnRQcmVjaXNpb24iLCJjdXJyZW5jeUNvZGUiOiJFVVIiLCJjZW50QW1vdW50Ijo0NTAwLCJmcmFjdGlvbkRpZ2l0cyI6Mn0sInRheGVkUHJpY2UiOnsidG90YWxOZXQiOnsidHlwZSI6ImNlbnRQcmVjaXNpb24iLCJjdXJyZW5jeUNvZGUiOiJFVVIiLCJjZW50QW1vdW50IjozNzgyLCJmcmFjdGlvbkRpZ2l0cyI6Mn0sInRvdGFsR3Jvc3MiOnsidHlwZSI6ImNlbnRQcmVjaXNpb24iLCJjdXJyZW5jeUNvZGUiOiJFVVIiLCJjZW50QW1vdW50Ijo0NTAwLCJmcmFjdGlvbkRpZ2l0cyI6Mn0sInRvdGFsVGF4Ijp7InR5cGUiOiJjZW50UHJlY2lzaW9uIiwiY3VycmVuY3lDb2RlIjoiRVVSIiwiY2VudEFtb3VudCI6NzE4LCJmcmFjdGlvbkRpZ2l0cyI6Mn19LCJsaW5lSXRlbU1vZGUiOiJTdGFuZGFyZCJ9XSwiY3VzdG9tTGluZUl0ZW1zIjpbXSwidHJhbnNhY3Rpb25GZWUiOnRydWUsImRpc2NvdW50Q29kZXMiOltdLCJkaXJlY3REaXNjb3VudHMiOltdLCJjYXJ0Ijp7InR5cGVJZCI6ImNhcnQiLCJpZCI6IjU2NDM2MDdkLTMyYWItNGY4Ny1hYTA4LTM3OTE4MGFlMDc2YiJ9LCJzaGlwcGluZ0FkZHJlc3MiOnsiZmlyc3ROYW1lIjoiRnVsbCIsImxhc3ROYW1lIjoiTmFtZSIsInN0cmVldE5hbWUiOiJTdHJlZXQgMjIiLCJwb3N0YWxDb2RlIjoiMTIzIiwiY2l0eSI6IlRvd24iLCJjb3VudHJ5IjoiREUiLCJwaG9uZSI6IisxMDEyMzQ1Njc4OSIsImVtYWlsIjoibWFpbEBwcm92aWRlci5jb20ifSwiYmlsbGluZ0FkZHJlc3MiOnsiZmlyc3ROYW1lIjoiRnVsbCIsImxhc3ROYW1lIjoiTmFtZSIsInN0cmVldE5hbWUiOiJTdHJlZXQgMjIiLCJwb3N0YWxDb2RlIjoiMTIzIiwiY2l0eSI6IlRvd24iLCJjb3VudHJ5IjoiREUiLCJwaG9uZSI6IisxMDEyMzQ1Njc4OSIsImVtYWlsIjoibWFpbEBwcm92aWRlci5jb20ifSwiaXRlbVNoaXBwaW5nQWRkcmVzc2VzIjpbXSwicmVmdXNlZEdpZnRzIjpbXX0sImNyZWF0ZWRBdCI6IjIwMjItMDUtMDNUMDQ6NDE6NDEuMTQzWiIsImxhc3RNb2RpZmllZEF0IjoiMjAyMi0wNS0wM1QwNDo0MTo0MS4xNDNaIn0=",
  };
  return action({ body: { message } })
    .then((result) => expect("ok").toBe("ok"))
    .catch(() => expect("good").toBe("ok"));
});
